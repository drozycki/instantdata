import{t as X,a as j}from"../chunks/CScCYyQC.js";import{i as J}from"../chunks/CXMguHLv.js";import{p as K,f as Q,t as tt,a as et,b as it,g as N,m as W,s as Z}from"../chunks/17LP3wq2.js";import{s as rt}from"../chunks/_krjKCcg.js";import{b as st}from"../chunks/BwpNukmJ.js";import{o as at}from"../chunks/BSGqvv92.js";import{d as nt,l as ot}from"../chunks/Cyf6ZVy0.js";import{_ as ht,i as _t,d as $,B as H,R as V,e as O,E as ft,a as q,p as dt,b as vt,g as ut,c as lt,f as pt,h as T,j as ct,r as gt,k as yt,m as S,l as mt,n as xt,o as D,q as Lt,u as wt,s as It,t as Rt,v as bt}from"../chunks/Du0g7Opb.js";function U(o,t,i){var e=dt.createCanvas(),a=t.getWidth(),s=t.getHeight(),r=e.style;return r&&(r.position="absolute",r.left="0",r.top="0",r.width=a+"px",r.height=s+"px",e.setAttribute("data-zr-dom-id",o)),e.width=a*i,e.height=s*i,e}var A=function(o){ht(t,o);function t(i,e,a){var s=o.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var r;a=a||q,typeof i=="string"?r=U(i,e,a):_t(i)&&(r=i,i=r.id),s.id=i,s.dom=r;var h=r.style;return h&&($(r),r.onselectstart=function(){return!1},h.padding="0",h.margin="0",h.borderWidth="0"),s.painter=e,s.dpr=a,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var i=this.dpr;this.domBack=U("back-"+this.id,this.painter,i),this.ctxBack=this.domBack.getContext("2d"),i!==1&&this.ctxBack.scale(i,i)},t.prototype.createRepaintRects=function(i,e,a,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r=[],h=this.maxRepaintRectCount,_=!1,d=new H(0,0,0,0);function f(l){if(!(!l.isFinite()||l.isZero()))if(r.length===0){var y=new H(0,0,0,0);y.copy(l),r.push(y)}else{for(var L=!1,k=1/0,B=0,w=0;w<r.length;++w){var m=r[w];if(m.intersect(l)){var b=new H(0,0,0,0);b.copy(m),b.union(l),r[w]=b,L=!0;break}else if(_){d.copy(l),d.union(m);var C=l.width*l.height,P=m.width*m.height,I=d.width*d.height,E=I-C-P;E<k&&(k=E,B=w)}}if(_&&(r[B].union(l),L=!0),!L){var y=new H(0,0,0,0);y.copy(l),r.push(y)}_||(_=r.length>=h)}}for(var n=this.__startIndex;n<this.__endIndex;++n){var u=i[n];if(u){var g=u.shouldBePainted(a,s,!0,!0),x=u.__isRendered&&(u.__dirty&V||!g)?u.getPrevPaintRect():null;x&&f(x);var c=g&&(u.__dirty&V||!u.__isRendered)?u.getPaintRect():null;c&&f(c)}}for(var n=this.__prevStartIndex;n<this.__prevEndIndex;++n){var u=e[n],g=u&&u.shouldBePainted(a,s,!0,!0);if(u&&(!g||!u.__zr)&&u.__isRendered){var x=u.getPrevPaintRect();x&&f(x)}}var v;do{v=!1;for(var n=0;n<r.length;){if(r[n].isZero()){r.splice(n,1);continue}for(var p=n+1;p<r.length;)r[n].intersect(r[p])?(v=!0,r[n].union(r[p]),r.splice(p,1)):p++;n++}}while(v);return this._paintRects=r,r},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(i,e){var a=this.dpr,s=this.dom,r=s.style,h=this.domBack;r&&(r.width=i+"px",r.height=e+"px"),s.width=i*a,s.height=e*a,h&&(h.width=i*a,h.height=e*a,a!==1&&this.ctxBack.scale(a,a))},t.prototype.clear=function(i,e,a){var s=this.dom,r=this.ctx,h=s.width,_=s.height;e=e||this.clearColor;var d=this.motionBlur&&!i,f=this.lastFrameAlpha,n=this.dpr,u=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,h/n,_/n));var g=this.domBack;function x(c,v,p,l){if(r.clearRect(c,v,p,l),e&&e!=="transparent"){var y=void 0;if(vt(e)){var L=e.global||e.__width===p&&e.__height===l;y=L&&e.__canvasGradient||ut(r,e,{x:0,y:0,width:p,height:l}),e.__canvasGradient=y,e.__width=p,e.__height=l}else lt(e)&&(e.scaleX=e.scaleX||n,e.scaleY=e.scaleY||n,y=pt(r,e,{dirty:function(){u.setUnpainted(),u.painter.refresh()}}));r.save(),r.fillStyle=y||e,r.fillRect(c,v,p,l),r.restore()}d&&(r.save(),r.globalAlpha=f,r.drawImage(g,c,v,p,l),r.restore())}!a||d?x(0,0,h,_):a.length&&O(a,function(c){x(c.x*n,c.y*n,c.width*n,c.height*n)})},t}(ft),Y=1e5,R=314159,M=.01,Ct=.001;function Bt(o){return o?o.__builtin__?!0:!(typeof o.resize!="function"||typeof o.refresh!="function"):!1}function Pt(o,t){var i=document.createElement("div");return i.style.cssText=["position:relative","width:"+o+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var kt=function(){function o(t,i,e,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=e=Lt({},e||{}),this.dpr=e.devicePixelRatio||q,this._singleCanvas=s,this.root=t;var r=t.style;r&&($(t),t.innerHTML=""),this.storage=i;var h=this._zlevelList;this._prevDisplayList=[];var _=this._layers;if(s){var f=t,n=f.width,u=f.height;e.width!=null&&(n=e.width),e.height!=null&&(u=e.height),this.dpr=e.devicePixelRatio||1,f.width=n*this.dpr,f.height=u*this.dpr,this._width=n,this._height=u;var g=new A(f,this,this.dpr);g.__builtin__=!0,g.initContext(),_[R]=g,g.zlevel=R,h.push(R),this._domRoot=t}else{this._width=D(t,0,e),this._height=D(t,1,e);var d=this._domRoot=Pt(this._width,this._height);t.appendChild(d)}}return o.prototype.getType=function(){return"canvas"},o.prototype.isSingleCanvas=function(){return this._singleCanvas},o.prototype.getViewportRoot=function(){return this._domRoot},o.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},o.prototype.refresh=function(t){var i=this.storage.getDisplayList(!0),e=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(i,e,t,this._redrawId);for(var s=0;s<a.length;s++){var r=a[s],h=this._layers[r];if(!h.__builtin__&&h.refresh){var _=s===0?this._backgroundColor:null;h.refresh(_)}}return this._opts.useDirtyRect&&(this._prevDisplayList=i.slice()),this},o.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},o.prototype._paintHoverList=function(t){var i=t.length,e=this._hoverlayer;if(e&&e.clear(),!!i){for(var a={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,r=0;r<i;r++){var h=t[r];h.__inHover&&(e||(e=this._hoverlayer=this.getLayer(Y)),s||(s=e.ctx,s.save()),T(s,h,a,r===i-1))}s&&s.restore()}},o.prototype.getHoverLayer=function(){return this.getLayer(Y)},o.prototype.paintOne=function(t,i){ct(t,i)},o.prototype._paintList=function(t,i,e,a){if(this._redrawId===a){e=e||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,i,e),r=s.finished,h=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(t),r)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var _=this;gt(function(){_._paintList(t,i,e,a)})}}},o.prototype._compositeManually=function(){var t=this.getLayer(R).ctx,i=this._domRoot.width,e=this._domRoot.height;t.clearRect(0,0,i,e),this.eachBuiltinLayer(function(a){a.virtual&&t.drawImage(a.dom,0,0,i,e)})},o.prototype._doPaintList=function(t,i,e){for(var a=this,s=[],r=this._opts.useDirtyRect,h=0;h<this._zlevelList.length;h++){var _=this._zlevelList[h],d=this._layers[_];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||e)&&s.push(d)}for(var f=!0,n=!1,u=function(c){var v=s[c],p=v.ctx,l=r&&v.createRepaintRects(t,i,g._width,g._height),y=e?v.__startIndex:v.__drawIndex,L=!e&&v.incremental&&Date.now,k=L&&Date.now(),B=v.zlevel===g._zlevelList[0]?g._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,B,l);else if(y===v.__startIndex){var w=t[y];(!w.incremental||!w.notClear||e)&&v.clear(!1,B,l)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=v.__startIndex);var m,b=function(E){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(m=y;m<v.__endIndex;m++){var F=t[m];if(F.__inHover&&(n=!0),a._doPaintEl(F,v,r,E,z,m===v.__endIndex-1),L){var G=Date.now()-k;if(G>15)break}}z.prevElClipPaths&&p.restore()};if(l)if(l.length===0)m=v.__endIndex;else for(var C=g.dpr,P=0;P<l.length;++P){var I=l[P];p.save(),p.beginPath(),p.rect(I.x*C,I.y*C,I.width*C,I.height*C),p.clip(),b(I),p.restore()}else p.save(),b(),p.restore();v.__drawIndex=m,v.__drawIndex<v.__endIndex&&(f=!1)},g=this,x=0;x<s.length;x++)u(x);return yt.wxa&&O(this._layers,function(c){c&&c.ctx&&c.ctx.draw&&c.ctx.draw()}),{finished:f,needsRefreshHover:n}},o.prototype._doPaintEl=function(t,i,e,a,s,r){var h=i.ctx;if(e){var _=t.getPaintRect();(!a||_&&_.intersect(a))&&(T(h,t,s,r),t.setPrevPaintRect(_))}else T(h,t,s,r)},o.prototype.getLayer=function(t,i){this._singleCanvas&&!this._needsManuallyCompositing&&(t=R);var e=this._layers[t];return e||(e=new A("zr_"+t,this,this.dpr),e.zlevel=t,e.__builtin__=!0,this._layerConfig[t]?S(e,this._layerConfig[t],!0):this._layerConfig[t-M]&&S(e,this._layerConfig[t-M],!0),i&&(e.virtual=i),this.insertLayer(t,e),e.initContext()),e},o.prototype.insertLayer=function(t,i){var e=this._layers,a=this._zlevelList,s=a.length,r=this._domRoot,h=null,_=-1;if(!e[t]&&Bt(i)){if(s>0&&t>a[0]){for(_=0;_<s-1&&!(a[_]<t&&a[_+1]>t);_++);h=e[a[_]]}if(a.splice(_+1,0,t),e[t]=i,!i.virtual)if(h){var d=h.dom;d.nextSibling?r.insertBefore(i.dom,d.nextSibling):r.appendChild(i.dom)}else r.firstChild?r.insertBefore(i.dom,r.firstChild):r.appendChild(i.dom);i.painter||(i.painter=this)}},o.prototype.eachLayer=function(t,i){for(var e=this._zlevelList,a=0;a<e.length;a++){var s=e[a];t.call(i,this._layers[s],s)}},o.prototype.eachBuiltinLayer=function(t,i){for(var e=this._zlevelList,a=0;a<e.length;a++){var s=e[a],r=this._layers[s];r.__builtin__&&t.call(i,r,s)}},o.prototype.eachOtherLayer=function(t,i){for(var e=this._zlevelList,a=0;a<e.length;a++){var s=e[a],r=this._layers[s];r.__builtin__||t.call(i,r,s)}},o.prototype.getLayers=function(){return this._layers},o.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(n,u){n.__dirty=n.__used=!1});function i(n){s&&(s.__endIndex!==n&&(s.__dirty=!0),s.__endIndex=n)}if(this._singleCanvas)for(var e=1;e<t.length;e++){var a=t[e];if(a.zlevel!==t[e-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var s=null,r=0,h,_;for(_=0;_<t.length;_++){var a=t[_],d=a.zlevel,f=void 0;h!==d&&(h=d,r=0),a.incremental?(f=this.getLayer(d+Ct,this._needsManuallyCompositing),f.incremental=!0,r=1):f=this.getLayer(d+(r>0?M:0),this._needsManuallyCompositing),f.__builtin__||mt("ZLevel "+d+" has been used by unkown layer "+f.id),f!==s&&(f.__used=!0,f.__startIndex!==_&&(f.__dirty=!0),f.__startIndex=_,f.incremental?f.__drawIndex=-1:f.__drawIndex=_,i(_),s=f),a.__dirty&V&&!a.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=_))}i(_),this.eachBuiltinLayer(function(n,u){!n.__used&&n.getElementCount()>0&&(n.__dirty=!0,n.__startIndex=n.__endIndex=n.__drawIndex=0),n.__dirty&&n.__drawIndex<0&&(n.__drawIndex=n.__startIndex)})},o.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},o.prototype._clearLayer=function(t){t.clear()},o.prototype.setBackgroundColor=function(t){this._backgroundColor=t,O(this._layers,function(i){i.setUnpainted()})},o.prototype.configLayer=function(t,i){if(i){var e=this._layerConfig;e[t]?S(e[t],i,!0):e[t]=i;for(var a=0;a<this._zlevelList.length;a++){var s=this._zlevelList[a];if(s===t||s===t+M){var r=this._layers[s];S(r,e[t],!0)}}}},o.prototype.delLayer=function(t){var i=this._layers,e=this._zlevelList,a=i[t];a&&(a.dom.parentNode.removeChild(a.dom),delete i[t],e.splice(xt(e,t),1))},o.prototype.resize=function(t,i){if(this._domRoot.style){var e=this._domRoot;e.style.display="none";var a=this._opts,s=this.root;if(t!=null&&(a.width=t),i!=null&&(a.height=i),t=D(s,0,a),i=D(s,1,a),e.style.display="",this._width!==t||i!==this._height){e.style.width=t+"px",e.style.height=i+"px";for(var r in this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,i);this.refresh(!0)}this._width=t,this._height=i}else{if(t==null||i==null)return;this._width=t,this._height=i,this.getLayer(R).resize(t,i)}return this},o.prototype.clearLayer=function(t){var i=this._layers[t];i&&i.clear()},o.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},o.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[R].dom;var i=new A("image",this,t.pixelRatio||this.dpr);i.initContext(),i.clear(!1,t.backgroundColor||this._backgroundColor);var e=i.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var a=i.dom.width,s=i.dom.height;this.eachLayer(function(n){n.__builtin__?e.drawImage(n.dom,0,0,a,s):n.renderToCanvas&&(e.save(),n.renderToCanvas(e),e.restore())})}else for(var r={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),_=0,d=h.length;_<d;_++){var f=h[_];T(e,f,r,_===d-1)}return i.dom},o.prototype.getWidth=function(){return this._width},o.prototype.getHeight=function(){return this._height},o}();function Et(o){o.registerPainter("canvas",kt)}var Ht=X('<p>Loaded chart</p> <div style="width: 100vw; height: 100vh;"></div>',1);function zt(o,t){K(t,!1);let i=W(),e=W(!0);wt([It,Et,Rt]),at(()=>{const h=bt(N(i),null,{renderer:"canvas"});h.on("finished",()=>{Z(e,!1)}),h.setOption({animation:!1,xAxis:{data:ot},yAxis:{},series:[{type:"line",data:nt}]})}),J();var a=Ht(),s=Q(a),r=it(s,2);st(r,h=>Z(i,h),()=>N(i)),tt(()=>rt(s,"style",N(e)?"display: none;":"")),j(o,a),et()}export{zt as component};
